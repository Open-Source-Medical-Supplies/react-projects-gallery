(this["webpackJsonpwordpress-react-projects-gallery"]=this["webpackJsonpwordpress-react-projects-gallery"]||[]).push([[0],{101:function(e,t,n){e.exports=n(254)},251:function(e,t,n){},252:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),s=n.n(i),c=n(5),l=n.n(c),o=n(16),u=n(2),d=n(19),p=(n(107),n(108),n(109),n(110),n(92)),m=n(18),h=n(4),f=n.n(h);function b(e){if(e){var t=e["Full Project Name"],n=e["Display Name"]?e["Display Name"][0]:"",a=e["Review Status"]?e["Review Status"][0]:"",r="#ERROR!"!==e.HeaderImageURL?e.HeaderImageURL:"",i=e.Description,s=e.Link;return{attributionOrg:e["Attribution Organization"],creator:e.Creator||"",name:t,displayName:n,reviewStatus:a,imageURL:r,description:i,externalLink:s}}}var v=function(e){var t=e.data,n=e.setCard,a=e.selectedCard,i=b(t),s=i.name,c=i.displayName,l=(i.reviewStatus,i.imageURL),o="string"!==typeof t.HeaderImageURL?r.a.createElement("div",{className:"center-flex",style:{height:"150px"}},"No image available"):r.a.createElement("img",{className:"centered-image",alt:s,src:l,style:{height:"150px"}}),u=r.a.createElement("span",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(m.Button,{onClick:function(){n({selectedCard:t,visible:!0})},label:"View",icon:"pi pi-eye",iconPos:"right",className:"p-button-raised p-button-rounded"})),d=a["Full Project Name"],h=f()({"card-selected":!!d&&d===s}),v=f()({"p-col-4":!d,"p-col-6":!!d});return r.a.createElement("div",{key:s,className:v},r.a.createElement(p.Card,{header:o,footer:u,className:h},r.a.createElement("h2",{className:"clamp-1"}," ",s," "),r.a.createElement("h3",{className:"clamp-1"}," ",c," ")))},k=function(e){var t=e.records,n=e.cardChange,a=e.selectedCard;return r.a.createElement("div",{className:"p-grid"},t.reduce((function(e,t){return e.push(r.a.createElement(v,{key:t["Base ID"],data:t,setCard:n,selectedCard:a})),e}),[]))},y=n(93),g=n(94),E=n(35),C=n(99),j=n(98),O=n(8),w=n.n(O),L=function(e){Object(C.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).onCloseClick=a.onCloseClick.bind(Object(E.a)(a)),a}return Object(g.a)(n,[{key:"componentDidMount",value:function(){this.props.visible&&this.onShow()}},{key:"componentWillUnmount",value:function(){this.unbindMaskClickListener(),this.disableModality()}},{key:"componentDidUpdate",value:function(e,t){e.visible!==this.props.visible&&(this.props.visible?this.onShow():this.onHide()),this.mask&&e.dismissable!==this.props.dismissable&&(this.props.dismissable?this.bindMaskClickListener():this.unbindMaskClickListener())}},{key:"onShow",value:function(){this.container.style.zIndex=String(this.props.baseZIndex+w.a.generateZIndex()),this.props.modal&&this.enableModality(),this.props.closeOnEscape&&this.bindDocumentEscapeListener(),this.closeIcon&&this.closeIcon.focus(),this.props.onShow&&this.props.onShow()}},{key:"enableModality",value:function(){if(!this.mask){this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1);var e="p-component-overlay p-sidebar-mask";this.props.blockScroll&&(e+=" p-sidebar-mask-scrollblocker"),w.a.addMultipleClasses(this.mask,e),this.props.dismissable&&this.bindMaskClickListener(),document.body.appendChild(this.mask),this.props.blockScroll&&w.a.addClass(document.body,"p-overflow-hidden")}}},{key:"disableModality",value:function(){if(this.mask){if(this.unbindMaskClickListener(),document.body.removeChild(this.mask),this.props.blockScroll){for(var e,t=document.body.children,n=0;n<t.length;n++){var a=t[n];if(w.a.hasClass(a,"p-sidebar-mask-scrollblocker")){e=!0;break}}e||w.a.removeClass(document.body,"p-overflow-hidden")}this.mask=null}}},{key:"onCloseClick",value:function(e){this.props.onHide(),e.preventDefault()}},{key:"onHide",value:function(){this.unbindMaskClickListener(),this.unbindDocumentEscapeListener(),this.props.modal&&this.disableModality()}},{key:"bindDocumentEscapeListener",value:function(){var e=this;this.documentEscapeListener=function(t){27===t.which&&parseInt(e.container.style.zIndex,10)===w.a.getCurrentZIndex()+e.props.baseZIndex&&e.onCloseClick(t)},document.addEventListener("keydown",this.documentEscapeListener)}},{key:"unbindDocumentEscapeListener",value:function(){this.documentEscapeListener&&(document.removeEventListener("keydown",this.documentEscapeListener),this.documentEscapeListener=null)}},{key:"bindMaskClickListener",value:function(){var e=this;this.maskClickListener||(this.maskClickListener=function(t){e.onCloseClick(t)},this.mask.addEventListener("click",this.maskClickListener))}},{key:"unbindMaskClickListener",value:function(){this.maskClickListener&&(this.mask.removeEventListener("click",this.maskClickListener),this.maskClickListener=null)}},{key:"renderCloseIcon",value:function(){var e=this;return r.a.createElement("button",{type:"button",ref:function(t){return e.closeIcon=t},className:"p-sidebar-close p-link close-button",onClick:this.onCloseClick,"aria-label":this.props.ariaCloseLabel},r.a.createElement("span",{className:"p-sidebar-close-icon pi pi-times"}))}},{key:"render",value:function(){var e=this,t=f()("p-sidebar p-component",this.props.className,"p-sidebar-"+this.props.position,{"p-sidebar-active":this.props.visible,"p-sidebar-full":this.props.fullScreen}),n=this.renderCloseIcon();return r.a.createElement("div",{ref:function(t){return e.container=t},id:this.props.id,className:t,style:this.props.style,role:"complementary"},n,this.props.children)}}]),n}(a.Component);L.defaultProps={id:null,style:null,className:null,visible:!1,position:"right",fullScreen:!1,blockScroll:!1,baseZIndex:0,dismissable:!0,showCloseIcon:!0,ariaCloseLabel:"close",closeOnEscape:!0,iconsTemplate:null,modal:!1,onShow:null,onHide:null};var N=function(e){return!function(e){return!Object.keys(e).length}(e)},x=function(e){var t=b(e.selectedCard),n=t.name,a=t.displayName,i=(t.reviewStatus,t.imageURL),s=t.description,c=t.externalLink,l=t.attributionOrg,o=t.creator,u="string"!==typeof i?r.a.createElement("div",{className:"center-flex",style:{height:"150px"}},"No image available"):r.a.createElement("img",{className:"centered-image",alt:n,src:i,style:{height:"250px"}}),d=r.a.createElement("section",{alt:"description"},r.a.createElement("p",null,s)),p=(null===c||void 0===c?void 0:c.split(";"))||[],h=r.a.createElement("section",{alt:"Sources"},r.a.createElement("h3",null,"Source"),p.map((function(e){return r.a.createElement("a",{key:e.slice(0,-10),href:e,target:"_blank",rel:"_blank noopener noreferrer nofollow"},r.a.createElement("span",{className:"clamp-1"},e))}))),f=r.a.createElement("section",{alt:"Attribution Organization"},r.a.createElement("h3",null,"Attribution Organization"),r.a.createElement("p",null,l)),v=o?r.a.createElement("section",{alt:"Creator"},r.a.createElement("h3",null,"Creator"),r.a.createElement("p",null,o)):null;console.log("todo: full-card icon + link/download ternary logic");var k,y=r.a.createElement("span",{alt:"footer",className:"full-card__footer"},r.a.createElement(m.Button,{onClick:(k=p[0],function(){return window.open(k,"_blank noopener noreferrer nofollow")}),tooltip:"Link will open in a new tab",label:"Make it!",icon:"pi pi-external-link",iconPos:"right",className:"p-button-raised p-button-rounded"}));return r.a.createElement("div",{className:"full-card"},r.a.createElement("div",{className:"full-card__content"},u,r.a.createElement("h1",null,n),r.a.createElement("h3",null,a),d,h,f,v),y)},S=n(95),I=new(n(118))({apiKey:"keyRGIXTxN4zNgMBf"}).base("apppSjiUMTolFIo1P");function M(){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I("Engineered Project Pages").select({view:"Default View"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return(R=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I("ProjectsFilterMenu").select({view:"Grid view"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=n(23),_=n(96),H=n(97),U=function(e){var t=e.setFilterState,n=e.categoriesFilters,i=e.categories,s=i.parent,c=i.children,l=Object(a.useState)({}),o=Object(d.a)(l,2),p=o[0],h=o[1],b=function(e){return h(Object(u.a)(Object(u.a)({},p),e))};Object(a.useEffect)((function(){b(null===c||void 0===c?void 0:c.reduce((function(e,t){return e[t.key]=!1,e}),{}))}),[]);var v=function(e){var a=e.data,i=f()("p-col p-component p-togglebutton",{"p-highlight":p[a.key]});return r.a.createElement(m.Button,{onClick:function(){return e=a.key,n[e]&&p[e]?(delete n[e],b(Object(D.a)({},e,!1))):(n[e]=!0,b(Object(D.a)({},e,!0))),void t({categoriesFilters:n});var e},label:a.label,className:i},r.a.createElement(_.a,{icon:a.icon}))};return r.a.createElement(H.Panel,{header:null===s||void 0===s?void 0:s.label,toggleable:!0},r.a.createElement("div",{className:"p-grid"},c.map((function(e){return r.a.createElement(v,{key:e.key,data:e})}))))};var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.key,a=e.parentKey;return a?t[a]?t[a].children.push(e):t[a]={parent:null,children:[e]}:t[n]?t[n]=Object(u.a)(Object(u.a)({},e),{},{children:t[n].children}):t[n]=Object(u.a)(Object(u.a)({},e),{},{children:[]}),t},B=function(e){var t=e.reduce((function(e,t){var n=t.key,a=t.parentKey;return"categories"===n?(e.categories.parent=t,e):"categories"===a?(e.categories.children.push(t),e):(t.icon&&(t.icon="pi "+t.icon),z(t,e.nodes),e)}),{categories:{parent:null,children:[]},nodes:{}}),n=Object.keys(t.nodes);return{categories:t.categories,nodes:n.map((function(e){return t.nodes[e]}))}},K=function(e,t){var n=e.nodeFilters;if(N(n)&&function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];if(e[a].checked||e[a].partialChecked)return!0}return!1}(n)){var a=function(e,t){var n=Object.keys(t),a=function(e){var t={};return e.forEach((function(e){t[e.key]=e,e.children&&e.children.forEach((function(e){t[e.key]=e}))})),t}(e);return n.reduce((function(e,n){var r=a[n],i=r.parentKey,s=r.label,c=r.columnHeader;return e.push(Object(u.a)({key:n,parentKey:i,label:s,columnHeader:c},t[n])),e}),[]).reduce((function(e,t){return z(t,e)}),{})}(e.nodes,e.nodeFilters),r=Object.keys(a);return t.reduce((function(e,t){var n=!1;return r.forEach((function(r){if(!n){var i=a[r],s=i.children,c=i.columnHeader||i.label,l=t[c];l&&function(e,t){return!!e.length&&e.some((function(e){return e.label===t||e.label.includes(t)||t.includes(e.label)}))}(s,l)&&(e.push(t),n=!0)}})),e}),[])}return t},Z={nodes:[],nodeFilters:{},categories:{parent:[],children:[]},categoriesFilters:{},filters:{}},A=function(e){var t=e.setState,n=e._records,i=Object(a.useState)(Z),s=Object(d.a)(i,2),c=s[0],p=s[1],m=function(e){return p(Object(u.a)(Object(u.a)({},c),e))};return Object(a.useEffect)((function(){!function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:e.sent.eachPage((function(e,t){var n=e.map((function(e){return e.fields})),a=B(n),r=a.categories,i=a.nodes;m({categories:r,nodes:i})}),(function(e){e&&console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(a.useEffect)((function(){var e=K(c,n);t({records:e})}),[c.categoriesFilters,c.nodeFilters]),r.a.createElement("div",{className:"sticky-top-0"},r.a.createElement(U,{categories:c.categories,categoriesFilters:c.categoriesFilters,setFilterState:m}),r.a.createElement("div",{className:"p-panel"},r.a.createElement("div",{className:"p-panel-titlebar"},r.a.createElement("span",{className:"p-panel-title"},"Attributes"))),r.a.createElement(S.Tree,{value:c.nodes,selectionMode:"checkbox",selectionKeys:c.nodeFilters,onSelectionChange:function(e){return m({nodeFilters:e.value})},filter:!0,filterPlaceholder:"Filter"}))},T=(n(251),n(24)),G=n(13),J=function(){return T.b.add(G.c,G.b,G.a,G.f,G.d,G.g,G.e)},V={_records:[],records:[],selectedCard:{},visible:!1},W=function(){J();var e=Object(a.useState)(V),t=Object(d.a)(e,2),n=t[0],i=t[1],s=function(e){return i(Object(u.a)(Object(u.a)({},n),e))};return Object(a.useEffect)((function(){!function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:e.sent.eachPage((function(e,t){var n=e.map((function(e){return e.fields})).filter((function(e){return!0!==e.staging}));s({records:n,_records:n})}),(function(e){e&&console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{flex:1,marginRight:"0.5rem"}},r.a.createElement(A,{_records:n._records,setState:s})),r.a.createElement("div",{style:{display:"flex",flex:n.visible?2:4}},r.a.createElement(k,{records:n.records,cardChange:s,selectedCard:n.selectedCard})),r.a.createElement("div",{style:{display:"flex",flex:n.visible?2:0}},r.a.createElement(L,{visible:n.visible,onHide:function(){return s(Object(u.a)(Object(u.a)({},V),{},{records:n.records}))},className:"p-sidebar-md"},r.a.createElement(x,{selectedCard:n.selectedCard}))))};n(252);s.a.render(r.a.createElement(W,null),document.getElementById("root"))}},[[101,1,2]]]);
//# sourceMappingURL=main.355d5341.chunk.js.map